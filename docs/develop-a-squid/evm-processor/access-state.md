---
sidebar_position: 50
description: >-
  Details on the store interface exposed by the handler context
---

# Access the contract state

The EVM contract state is accessed using the `Contract` class generated by [`evm-typegen(1)`](develop-a-squid/typegen/squid-evm-typegen). It takes the handler context and the contract address as constructor arguments. The state is always accessed at the context block height unless explicitly defined in the constructor.
```typescript title="src/abi/erc721.ts"
export class Contract  {
  constructor(ctx: BlockContext, address: string)
  constructor(ctx: ChainContext, block: Block, address: string) { 
    //...
  }
  private async call(name: string, args: any[]) : Promise<ReadonlyArray<any>>  {
    //...
  }
  async balanceOf(owner: string): Promise<ethers.BigNumber> {
    return this.call("balanceOf", [owner])
  }
}
```

To create a `Contract` pass the context and the current block in the handler. Then the contract state at the given block height is queried in a straightforward way:

```ts
// ...
const CONTRACT_ADDRESS= "0xb654611f84a8dc429ba3cb4fda9fad236c505a1a"

processor.run(new TypeormDatabase(), async ctx => {
    for (const block of ctx.blocks) { 
      for (const item of block.items) {
        if (item.name === "evmLog") {
          const contract = new erc721.Contract(ctx, block, CONTRACT_ADDRESS);
          // query the contract state at the current block
          const uri = await contract.tokenURI(1137)
        }
      }
    }
})
```

For more information on EVM Typegen, see this [dedicated page](/develop-a-squid/typegen/squid-evm-typegen).